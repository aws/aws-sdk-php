{
  "version": "1.0",
  "examples": {
    "BatchDeleteImage": [
      {
        "input": {
          "imageIds": [
            {
              "imageTag": "precise"
            }
          ],
          "repositoryName": "ubuntu"
        },
        "output": {
          "failures": [],
          "imageIds": [
            {
              "imageDigest": "sha256:examplee6d1e504117a17000003d3753086354a38375961f2e665416ef4b1b2f",
              "imageTag": "precise"
            }
          ]
        },
        "comments": {},
        "description": "This example deletes images with the tags precise and trusty in a repository called ubuntu in the default registry for an account.",
        "id": "batchdeleteimages-example-1470860541707",
        "title": "To delete multiple images"
      }
    ],
    "BatchGetImage": [
      {
        "input": {
          "imageIds": [
            {
              "imageTag": "precise"
            }
          ],
          "repositoryName": "ubuntu"
        },
        "output": {
          "failures": [],
          "images": [
            {
              "imageId": {
                "imageDigest": "sha256:example76bdff6d83a09ba2a818f0d00000063724a9ac3ba5019c56f74ebf42a",
                "imageTag": "precise"
              },
              "imageManifest": "{\n \"schemaVersion\": 1,\n \"name\": \"ubuntu\",\n \"tag\": \"precise\",\n...",
              "registryId": "244698725403",
              "repositoryName": "ubuntu"
            }
          ]
        },
        "comments": {
          "output": {
            "imageManifest": "In this example, the imageManifest in the output JSON has been truncated."
          }
        },
        "description": "This example obtains information for an image with a specified image digest ID from the repository named ubuntu in the current account.",
        "id": "batchgetimage-example-1470862771437",
        "title": "To obtain multiple images in a single request"
      }
    ],
    "CreateRepository": [
      {
        "input": {
          "repositoryName": "project-a/nginx-web-app"
        },
        "output": {
          "repository": {
            "registryId": "012345678901",
            "repositoryArn": "arn:aws:ecr:us-west-2:012345678901:repository/project-a/nginx-web-app",
            "repositoryName": "project-a/nginx-web-app"
          }
        },
        "comments": {
          "output": {
            "imageManifest": "In this example, the imageManifest in the output JSON has been truncated."
          }
        },
        "description": "This example creates a repository called nginx-web-app inside the project-a namespace in the default registry for an account.",
        "id": "createrepository-example-1470863688724",
        "title": "To create a new repository"
      }
    ],
    "CreateRepositoryCreationTemplate": [
      {
        "input": {
          "appliedFor": [
            "REPLICATION",
            "PULL_THROUGH_CACHE"
          ],
          "description": "Repos for testing images",
          "encryptionConfiguration": {
            "encryptionType": "AES256"
          },
          "imageTagMutability": "MUTABLE",
          "lifecyclePolicy": "{\r\n    \"rules\": [\r\n        {\r\n            \"rulePriority\": 1,\r\n            \"description\": \"Expire images older than 14 days\",\r\n            \"selection\": {\r\n                \"tagStatus\": \"untagged\",\r\n                \"countType\": \"sinceImagePushed\",\r\n                \"countUnit\": \"days\",\r\n                \"countNumber\": 14\r\n            },\r\n            \"action\": {\r\n                \"type\": \"expire\"\r\n            }\r\n        }\r\n    ]\r\n}",
          "prefix": "eng/test",
          "repositoryPolicy": "{\r\n  \"Version\": \"2012-10-17\",\r\n  \"Statement\": [\r\n    {\r\n      \"Sid\": \"LambdaECRPullPolicy\",\r\n      \"Effect\": \"Allow\",\r\n      \"Principal\": {\r\n        \"Service\": \"lambda.amazonaws.com\"\r\n      },\r\n      \"Action\": \"ecr:BatchGetImage\"\r\n    }\r\n  ]\r\n}",
          "resourceTags": [
            {
              "Key": "environment",
              "Value": "test"
            }
          ]
        },
        "output": {
          "registryId": "012345678901",
          "repositoryCreationTemplate": {
            "appliedFor": [
              "REPLICATION",
              "PULL_THROUGH_CACHE"
            ],
            "createdAt": "2023-12-16T17:29:02-07:00",
            "description": "Repos for testing images",
            "encryptionConfiguration": {
              "encryptionType": "AES256"
            },
            "imageTagMutability": "MUTABLE",
            "lifecyclePolicy": "{\r\n    \"rules\": [\r\n        {\r\n            \"rulePriority\": 1,\r\n            \"description\": \"Expire images older than 14 days\",\r\n            \"selection\": {\r\n                \"tagStatus\": \"untagged\",\r\n                \"countType\": \"sinceImagePushed\",\r\n                \"countUnit\": \"days\",\r\n                \"countNumber\": 14\r\n            },\r\n            \"action\": {\r\n                \"type\": \"expire\"\r\n            }\r\n        }\r\n    ]\r\n}",
            "prefix": "eng/test",
            "repositoryPolicy": "{\n  \"Version\" : \"2012-10-17\",\n  \"Statement\" : [ {\n    \"Sid\" : \"LambdaECRPullPolicy\",\n    \"Effect\" : \"Allow\",\n    \"Principal\" : {\n      \"Service\" : \"lambda.amazonaws.com\"\n    },\n    \"Action\" : \"ecr:BatchGetImage\"\n  } ]\n}",
            "resourceTags": [
              {
                "Key": "environment",
                "Value": "test"
              }
            ],
            "updatedAt": "2023-12-16T17:29:02-07:00"
          }
        },
        "comments": {
          "input": {},
          "output": {}
        },
        "description": "This example creates a repository creation template.",
        "id": "create-a-new-repository-creation-template-1713296923053",
        "title": "Create a new repository creation template"
      }
    ],
    "DeleteRepository": [
      {
        "input": {
          "force": true,
          "repositoryName": "ubuntu"
        },
        "output": {
          "repository": {
            "registryId": "012345678901",
            "repositoryArn": "arn:aws:ecr:us-west-2:012345678901:repository/ubuntu",
            "repositoryName": "ubuntu"
          }
        },
        "comments": {
          "output": {
            "imageManifest": "In this example, the imageManifest in the output JSON has been truncated."
          }
        },
        "description": "This example force deletes a repository named ubuntu in the default registry for an account. The force parameter is required if the repository contains images.",
        "id": "deleterepository-example-1470863805703",
        "title": "To force delete a repository"
      }
    ],
    "DeleteRepositoryCreationTemplate": [
      {
        "input": {
          "prefix": "eng"
        },
        "output": {
          "registryId": "012345678901",
          "repositoryCreationTemplate": {
            "createdAt": "2023-12-03T16:27:57.933000-08:00",
            "encryptionConfiguration": {
              "encryptionType": "AES256"
            },
            "imageTagMutability": "MUTABLE",
            "prefix": "eng",
            "updatedAt": "2023-12-03T16:27:57.933000-08:00"
          }
        },
        "comments": {
          "input": {},
          "output": {}
        },
        "description": "This example deletes a repository creation template.",
        "id": "delete-a-repository-creation-template-1713298142230",
        "title": "Delete a repository creation template"
      }
    ],
    "DeleteRepositoryPolicy": [
      {
        "input": {
          "repositoryName": "ubuntu"
        },
        "output": {
          "policyText": "{ ... }",
          "registryId": "012345678901",
          "repositoryName": "ubuntu"
        },
        "comments": {},
        "description": "This example deletes the policy associated with the repository named ubuntu in the current account.",
        "id": "deleterepositorypolicy-example-1470866943748",
        "title": "To delete the policy associated with a repository"
      }
    ],
    "DeregisterPullTimeUpdateExclusion": [
      {
        "input": {
          "principalArn": "arn:aws:iam::012345678910:role/ECRAccess"
        },
        "output": {
          "principalArn": "arn:aws:iam::012345678910:role/ECRAccess"
        },
        "description": "This example removes an IAM role from the pull time update exclusion list. Amazon ECR will resume recording image pull timestamps for this principal.",
        "id": "deregisterpulltimeupdateexclusion-example",
        "title": "To remove a principal from the pull time exclusion list"
      }
    ],
    "DescribeRepositories": [
      {
        "input": {},
        "output": {
          "repositories": [
            {
              "registryId": "012345678910",
              "repositoryArn": "arn:aws:ecr:us-west-2:012345678910:repository/ubuntu",
              "repositoryName": "ubuntu"
            },
            {
              "registryId": "012345678910",
              "repositoryArn": "arn:aws:ecr:us-west-2:012345678910:repository/test",
              "repositoryName": "test"
            }
          ]
        },
        "comments": {
          "output": {}
        },
        "description": "The following example obtains a list and description of all repositories in the default registry to which the current user has access.",
        "id": "describe-repositories-1470856017467",
        "title": "To describe all repositories in the current account"
      }
    ],
    "DescribeRepositoryCreationTemplates": [
      {
        "input": {
          "maxResults": 123,
          "nextToken": "",
          "prefixes": [
            "eng"
          ]
        },
        "output": {
          "nextToken": "",
          "registryId": "012345678901",
          "repositoryCreationTemplates": [
            {
              "appliedFor": [
                "PULL_THROUGH_CACHE",
                "REPLICATION"
              ],
              "createdAt": "2023-12-16T17:29:02-07:00",
              "encryptionConfiguration": {
                "encryptionType": "AES256"
              },
              "imageTagMutability": "MUTABLE",
              "prefix": "eng/test",
              "updatedAt": "2023-12-16T19:55:02-07:00"
            },
            {
              "appliedFor": [
                "REPLICATION"
              ],
              "createdAt": "2023-12-14T17:29:02-07:00",
              "encryptionConfiguration": {
                "encryptionType": "AES256"
              },
              "imageTagMutability": "IMMUTABLE",
              "prefix": "eng/replication-test",
              "updatedAt": "2023-12-14T19:55:02-07:00"
            }
          ]
        },
        "comments": {
          "input": {},
          "output": {}
        },
        "description": "This example describes the contents of a repository creation template.",
        "id": "describe-a-repository-creation-template-1713298784302",
        "title": "Describe a repository creation template"
      }
    ],
    "GetAuthorizationToken": [
      {
        "input": {},
        "output": {
          "authorizationData": [
            {
              "authorizationToken": "QVdTOkNEXAMPLE",
              "expiresAt": "2022-05-17T06:56:13.652000+00:00",
              "proxyEndpoint": "https://012345678901.dkr.ecr.us-west-2.amazonaws.com"
            }
          ]
        },
        "comments": {},
        "description": "This example gets an authorization token for your default registry.",
        "id": "getauthorizationtoken-example-1470867047084",
        "title": "To obtain an authorization token"
      }
    ],
    "GetRepositoryPolicy": [
      {
        "input": {
          "repositoryName": "ubuntu"
        },
        "output": {
          "policyText": "{\n  \"Version\" : \"2008-10-17\",\n  \"Statement\" : [ {\n    \"Sid\" : \"new statement\",\n    \"Effect\" : \"Allow\",\n    \"Principal\" : {\n     \"AWS\" : \"arn:aws:iam::012345678901:role/CodeDeployDemo\"\n    },\n\"Action\" : [ \"ecr:GetDownloadUrlForLayer\", \"ecr:BatchGetImage\", \"ecr:BatchCheckLayerAvailability\" ]\n } ]\n}",
          "registryId": "012345678901",
          "repositoryName": "ubuntu"
        },
        "comments": {},
        "description": "This example obtains the repository policy for the repository named ubuntu.",
        "id": "getrepositorypolicy-example-1470867669211",
        "title": "To get the current policy for a repository"
      }
    ],
    "ListImageReferrers": [
      {
        "input": {
          "repositoryName": "sample-repo",
          "subjectId": {
            "imageDigest": "sha256:943e640159415616581703a53fa4ed87e96740655fd67daf2d2146a35337bce5"
          }
        },
        "output": {
          "referrers": [
            {
              "annotations": {
                "dev.sigstore.bundle.content": "dsse-envelope",
                "dev.sigstore.bundle.predicateType": "https://sigstore.dev/cosign/sign/v1",
                "org.opencontainers.image.created": "2025-11-17T22:00:33Z"
              },
              "artifactStatus": "ACTIVE",
              "artifactType": "application/vnd.dev.sigstore.bundle.v0.3+json",
              "digest": "sha256:270c60be5b6ed41e6e7c505ac0c4e2577748affc14147bcba76b533604dc7a07",
              "mediaType": "application/vnd.oci.image.manifest.v1+json",
              "size": 888
            }
          ]
        },
        "description": "This example lists all artifacts (such as Sigstore signatures) that reference a specific container image in the sample-repo repository.",
        "id": "listimagereferrers-basic-example",
        "title": "To list artifacts associated with a subject image"
      },
      {
        "input": {
          "filter": {
            "artifactTypes": [
              "application/vnd.dev.sigstore.bundle.v0.3+json"
            ]
          },
          "repositoryName": "sample-repo",
          "subjectId": {
            "imageDigest": "sha256:943e640159415616581703a53fa4ed87e96740655fd67daf2d2146a35337bce5"
          }
        },
        "output": {
          "referrers": [
            {
              "annotations": {
                "dev.sigstore.bundle.content": "dsse-envelope",
                "dev.sigstore.bundle.predicateType": "https://sigstore.dev/cosign/sign/v1",
                "org.opencontainers.image.created": "2025-11-17T22:00:33Z"
              },
              "artifactStatus": "ACTIVE",
              "artifactType": "application/vnd.dev.sigstore.bundle.v0.3+json",
              "digest": "sha256:270c60be5b6ed41e6e7c505ac0c4e2577748affc14147bcba76b533604dc7a07",
              "mediaType": "application/vnd.oci.image.manifest.v1+json",
              "size": 888
            }
          ]
        },
        "description": "This example lists only Sigstore bundle artifacts associated with a subject image by filtering on the artifact type.",
        "id": "listimagereferrers-filtered-example",
        "title": "To list artifacts of a specific type"
      },
      {
        "input": {
          "filter": {
            "artifactStatus": "ANY"
          },
          "repositoryName": "sample-repo",
          "subjectId": {
            "imageDigest": "sha256:943e640159415616581703a53fa4ed87e96740655fd67daf2d2146a35337bce5"
          }
        },
        "output": {
          "referrers": [
            {
              "annotations": {
                "dev.sigstore.bundle.content": "dsse-envelope",
                "dev.sigstore.bundle.predicateType": "https://sigstore.dev/cosign/sign/v1",
                "org.opencontainers.image.created": "2025-11-17T22:00:33Z"
              },
              "artifactStatus": "ACTIVE",
              "artifactType": "application/vnd.dev.sigstore.bundle.v0.3+json",
              "digest": "sha256:270c60be5b6ed41e6e7c505ac0c4e2577748affc14147bcba76b533604dc7a07",
              "mediaType": "application/vnd.oci.image.manifest.v1+json",
              "size": 888
            },
            {
              "annotations": {
                "dev.sigstore.bundle.predicateType": "https://sigstore.dev/cosign/sign/v1",
                "org.opencontainers.image.created": "2025-10-15T14:30:00Z"
              },
              "artifactStatus": "ARCHIVED",
              "artifactType": "application/vnd.dev.sigstore.bundle.v0.2+json",
              "digest": "sha256:5a1c89f2b3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0",
              "mediaType": "application/vnd.oci.image.manifest.v1+json",
              "size": 856
            }
          ]
        },
        "description": "This example lists all artifacts including those that have been archived, by specifying the artifactStatus filter as ANY.",
        "id": "listimagereferrers-archived-example",
        "title": "To list both active and archived artifacts"
      }
    ],
    "ListImages": [
      {
        "input": {
          "repositoryName": "ubuntu"
        },
        "output": {
          "imageIds": [
            {
              "imageDigest": "sha256:764f63476bdff6d83a09ba2a818f0d35757063724a9ac3ba5019c56f74ebf42a",
              "imageTag": "precise"
            }
          ]
        },
        "comments": {},
        "description": "This example lists all of the images in the repository named ubuntu in the default registry in the current account. ",
        "id": "listimages-example-1470868161594",
        "title": "To list all images in a repository"
      }
    ],
    "ListPullTimeUpdateExclusions": [
      {
        "input": {},
        "output": {
          "pullTimeUpdateExclusions": [
            "arn:aws:iam::012345678910:role/ECRAccess"
          ]
        },
        "description": "This example lists all IAM principals that are excluded from having their image pull timestamps recorded in the registry.",
        "id": "listpulltimeupdateexclusions-basic-example",
        "title": "To list all pull time update exclusions"
      },
      {
        "input": {
          "maxResults": 2
        },
        "output": {
          "nextToken": "eyJlbmNyeXB0ZWREYXRhIjpbXX0=",
          "pullTimeUpdateExclusions": [
            "arn:aws:iam::012345678910:role/ECRAccess",
            "arn:aws:iam::012345678910:role/CICDPipeline"
          ]
        },
        "description": "This example lists pull time update exclusions with pagination, requesting a maximum of 2 results per page.",
        "id": "listpulltimeupdateexclusions-paginated-example",
        "title": "To list pull time update exclusions with pagination"
      }
    ],
    "RegisterPullTimeUpdateExclusion": [
      {
        "input": {
          "principalArn": "arn:aws:iam::012345678910:role/ECRAccess"
        },
        "output": {
          "createdAt": "2025-11-17T22:08:12.659000+00:00",
          "principalArn": "arn:aws:iam::012345678910:role/ECRAccess"
        },
        "description": "This example adds an IAM role to the pull time update exclusion list so that Amazon ECR will not record image pull timestamps for this principal.",
        "id": "registerpulltimeupdateexclusion-role-example",
        "title": "To exclude an IAM role from pull time tracking"
      }
    ],
    "UpdateImageStorageClass": [
      {
        "input": {
          "imageId": {
            "imageDigest": "sha256:0b1a4e0c81c434fa7928e5c4a2651a521ebabc4ff200c65f7e25b99373efca3b"
          },
          "registryId": "724772093679",
          "repositoryName": "hello-repository",
          "targetStorageClass": "ARCHIVE"
        },
        "output": {
          "imageId": {
            "imageDigest": "sha256:0b1a4e0c81c434fa7928e5c4a2651a521ebabc4ff200c65f7e25b99373efca3b"
          },
          "imageStatus": "ARCHIVED",
          "registryId": "724772093679",
          "repositoryName": "hello-repository"
        },
        "description": "This example transitions an image with a specific digest in the hello-repository repository to Amazon ECR Archive storage for long-term archival.",
        "id": "updateimagestorageclass-archive-example",
        "title": "To transition an image to Amazon ECR Archive"
      },
      {
        "input": {
          "imageId": {
            "imageDigest": "sha256:0b1a4e0c81c434fa7928e5c4a2651a521ebabc4ff200c65f7e25b99373efca3b"
          },
          "registryId": "724772093679",
          "repositoryName": "hello-repository",
          "targetStorageClass": "STANDARD"
        },
        "output": {
          "imageId": {
            "imageDigest": "sha256:0b1a4e0c81c434fa7928e5c4a2651a521ebabc4ff200c65f7e25b99373efca3b"
          },
          "imageStatus": "ACTIVATING",
          "registryId": "724772093679",
          "repositoryName": "hello-repository"
        },
        "description": "This example restores an archived image with a specific digest back to Amazon ECR Standard storage.",
        "id": "updateimagestorageclass-restore-example",
        "title": "To restore an archived image to Amazon ECR Standard"
      }
    ],
    "UpdateRepositoryCreationTemplate": [
      {
        "input": {
          "appliedFor": [
            "REPLICATION"
          ],
          "prefix": "eng/test",
          "resourceTags": [
            {
              "Key": "environment",
              "Value": "test"
            }
          ]
        },
        "output": {
          "registryId": "012345678901",
          "repositoryCreationTemplate": {
            "appliedFor": [
              "REPLICATION"
            ],
            "createdAt": "2023-12-16T17:29:02-07:00",
            "description": "Repos for testing images",
            "encryptionConfiguration": {
              "encryptionType": "AES256"
            },
            "imageTagMutability": "MUTABLE",
            "lifecyclePolicy": "{\r\n    \"rules\": [\r\n        {\r\n            \"rulePriority\": 1,\r\n            \"description\": \"Expire images older than 14 days\",\r\n            \"selection\": {\r\n                \"tagStatus\": \"untagged\",\r\n                \"countType\": \"sinceImagePushed\",\r\n                \"countUnit\": \"days\",\r\n                \"countNumber\": 14\r\n            },\r\n            \"action\": {\r\n                \"type\": \"expire\"\r\n            }\r\n        }\r\n    ]\r\n}",
            "prefix": "eng/test",
            "repositoryPolicy": "{\n  \"Version\" : \"2012-10-17\",\n  \"Statement\" : [ {\n    \"Sid\" : \"LambdaECRPullPolicy\",\n    \"Effect\" : \"Allow\",\n    \"Principal\" : {\n      \"Service\" : \"lambda.amazonaws.com\"\n    },\n    \"Action\" : \"ecr:BatchGetImage\"\n  } ]\n}",
            "resourceTags": [
              {
                "Key": "environment",
                "Value": "test"
              }
            ],
            "updatedAt": "2023-12-16T19:55:02-07:00"
          }
        },
        "comments": {
          "input": {},
          "output": {}
        },
        "description": "This example updates a repository creation template.",
        "id": "update-a-repository-creation-template-1713299261276",
        "title": "Update a repository creation template"
      }
    ]
  }
}
